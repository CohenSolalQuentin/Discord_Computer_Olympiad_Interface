#LyX 2.4 created this file. For more info see https://www.lyx.org/
\lyxformat 620
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass article
\begin_preamble
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\end_preamble
\use_default_options true
\begin_modules
theorems-ams
\end_modules
\maintain_unincluded_children no
\language french
\language_package default
\inputencoding utf8
\fontencoding auto
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_roman_osf false
\font_sans_osf false
\font_typewriter_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures true
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\float_placement class
\float_alignment class
\paperfontsize default
\spacing single
\use_hyperref false
\papersize default
\use_geometry true
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine basic
\cite_engine_type default
\biblio_style plain
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 1
\use_formatted_ref 0
\use_minted 0
\use_lineno 0
\index Index
\shortcut idx
\color #008000
\end_index
\leftmargin 3cm
\topmargin 3cm
\rightmargin 3cm
\bottommargin 3cm
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\paragraph_indentation default
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 1
\paperpagestyle default
\tablestyle default
\tracking_changes false
\output_changes false
\change_bars false
\postpone_fragile_content true
\html_math_output 0
\html_css_as_file 0
\html_be_strict false
\docbook_table_output 0
\docbook_mathml_prefix 1
\end_header

\begin_body

\begin_layout Title
Guide d'utilisation du Discord Computer Olympiad Interface
\begin_inset Note Note
status open

\begin_layout Plain Layout
TODO :
 Ajouter de nouveaux jeux
\end_layout

\begin_layout Plain Layout
Utiliser l'arbitre
\end_layout

\end_inset


\end_layout

\begin_layout Author
Quentin Cohen-Solal
\begin_inset Newline newline
\end_inset


\size small
quentin.cohen-solal@dauphine.psl.eu
\end_layout

\begin_layout Standard
Ce document explique comment utiliser les trois fonctionnalités principales du Discord Computer Olympiad Interface (DCOI),
 à savoir:
\end_layout

\begin_layout Itemize
effectuer un match en mode manuel :
 un humain entre textuellement les actions de son programme dans la conversation discord (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Jeu-manuel"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\end_layout

\begin_layout Itemize
effectuer un match en mode automatique:
 utiliser un bot Discord joueur qui écrit à votre place les actions de jeu indiqué par votre programme dans la conversation discord (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Jeu-automatisé-par"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\end_layout

\begin_layout Itemize
créer son serveur de jeu personnel,
 pour faire une beta test local pour les Computer Olympiad ou pour organiser sa propre compétition (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Création-d'un-serveur"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Standard
Si l'on souhaite utiliser uniquement le mode automatique,
 il est toutefois nécessaire de lire la section suivante,
 qui en plus de décrire succinctement comment jouer en mode manuel,
 explique le DCOI afin de faciliter la compréhension des sections suivantes,
 ce qui inclut comment choisir un jeu et lancer une partie.
 Cette première section traite également du mode de jeu Free_game qui permet de jouer (en mode manuel ou automatique) à n'importe quel jeu à information parfaite,
 en déléguant aux joueurs la détermination et la vérification des actions valides ainsi que de la fin de la partie.
\end_layout

\begin_layout Remark
si vous rencontrez des frustrations ou des bugs à la lecture de ce document ou à l'utilisation du DCOI,
 n'hésitez pas à me les signaler.
\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Section
Description du DCOI et utilisation en mode manuel
\begin_inset CommandInset label
LatexCommand label
name "sec:Jeu-manuel"

\end_inset


\end_layout

\begin_layout Standard
Pour utiliser le DCOI,
 vous devez pouvoir utiliser Discord.
 Vous devez donc installer l'application ou utiliser la version web de Discord  et créer un compte,
 si ce n'est pas déjà fait (voir 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://discord.com
\end_layout

\end_inset

).
 Cette section commence par présenter le fonctionnement global (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Fonctionnement-global"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

),
 puis présente l'accès aux salons des matchs (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:L'application-Discord-et"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

),
 suivi du mode d'emploi pour réaliser une partie (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Lancement-d'une-partie"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

),
 en expliquant notamment la syntaxe des actions (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Syntaxe-des-actions"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
 Quelques mises en garde sont également décrites dans les Sections
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Matchs-et-discussions"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset


\begin_inset space ~
\end_inset

,
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Mise-en-garde"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset


\begin_inset space ~
\end_inset

et
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Avertissement-sur-les"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

.
 Enfin,
 nous parlons brièvement du système de logging des matchs (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Logging-des-matchs"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\end_layout

\begin_layout Subsection
Fonctionnement global
\begin_inset CommandInset label
LatexCommand label
name "subsec:Fonctionnement-global"

\end_inset


\end_layout

\begin_layout Subsubsection
DCOI et bot arbitre
\end_layout

\begin_layout Standard
Le DCOI est à la fois une librairie Python et un ensemble de bots Python tout prêt ou à hériter pour réaliser des bots joueurs et des bots arbitres,
 permettant de jouer et de gérer des matchs au sein d'une discussion Discord.
\end_layout

\begin_layout Standard
Les joueurs et opérateurs rejoignent le serveur Discord de la compétition.
 Lorsque les commandes de lancement de matchs sont inscrites dans la conversation d'un salon Discord,
 la partie commence.
 Celle-ci est ainsi gérée par un bot arbitre (mis en place par les organisateurs).
 Les joueurs et bots joueurs doivent alors inscrire dans la conversation leurs actions de jeu lorsque le bot arbitre les y invitent.
 Le bot arbitre vérifie la légalité des coups,
 gère les erreurs,
 chronomètre le temps des joueurs et indique une fin de partie (normal ou du à un dépassement du temps autorisé) et le vainqueur de la partie.
 
\end_layout

\begin_layout Subsubsection
Focus sur les bots joueurs
\end_layout

\begin_layout Standard
Toute la partie concernant Discord est automatisée avec les bots Discord.
 Les utilisateurs n'ont qu'une chose à faire :
 connecter leur programme au bot Discord joueur,
 qui s'occupera de gérer les événements Discord et d'écrire dans la conversation par exemple.
 Pour faire l'interface entre les deux programmes,
 il faut soit hériter un bot joueur et implémenter la méthode 
\begin_inset Quotes eld
\end_inset

plays
\begin_inset Quotes erd
\end_inset

 en utilisant les méthodes de jeux du DCOI soit implémenter le protocole de communication Go Text Protocol.
 Dans les deux cas,
 il peut aussi y avoir besoin d'effectuer une conversion de la syntaxe des actions de jeu du DCOI dans la syntaxe de votre programme.
 Enfin,
 il faut créer un compte de bot et spécifier un fichier de configuration pour faire le lien entre le compte de bot et le programme de bot.
\end_layout

\begin_layout Subsection
L'application Discord et les salons des matchs
\begin_inset CommandInset label
LatexCommand label
name "subsec:L'application-Discord-et"

\end_inset


\end_layout

\begin_layout Subsubsection
Discord:
 serveurs et salons
\begin_inset CommandInset label
LatexCommand label
name "subsec:Discord:-serveurs-et-salons"

\end_inset


\end_layout

\begin_layout Standard
Nous passons rapidement en revue les différents éléments de l'application Discord dont nous avons besoin pour réaliser un match.
\end_layout

\begin_layout Standard
Une capture d'écran de l'application est disponible dans la Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Discord-App"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

.
 La première étape consiste à rejoindre le serveur de la compétition (les serveurs sur discord s'appellent des guildes).
 Lors du premier accès,
 il faut cliquer sur le 
\begin_inset Quotes eld
\end_inset

+
\begin_inset Quotes erd
\end_inset

 en bas de la liste des serveurs (voir Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Discord-servers-list"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
 Lors de la compétition ou de la beta test,
 cliquez sur "rejoindre un serveur" puis entrer le lien du serveur fournit par les organisateurs.
 Pour la beta test,
 il faut rejoindre le serveur 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://discord.gg/mbHBdH3K
\end_layout

\end_inset

.
 Une fois le serveur ajouté à votre compte,
 vous pouvez à tout moment y retourner en cliquant sur l'icone du serveur désormais présente dans la liste des serveurs (voir Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Discord-servers-list"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
 Une fois rejoint le serveur,
 il faut rejoindre le salon du match,
 en cliquant sur son nom.
 Les salons disponibles se trouvent dans la zone prévue à cet effet (voir la Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Discord-channel-list"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
 Vous pouvez aussi rejoindre le salon général / discussion pour parler avec les autres participants ou tout autre salon,
 notamment pour demander de l'aide.
 Comme dans n'importe quelle messagerie instantanée,
 pour écrire dans le salon choisi,
 il suffit d'écrire en utilisant votre clavier dans la zone prévue à cette effet (Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Discord-input-area"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
 Une fois appuyé sur entrée,
 votre message est envoyé et rejoindra la zone affichant l'historique de la conversation (milieu de la fenêtre,
 si besoin voir la Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Discord-conversation"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\end_layout

\begin_layout Subsubsection
Matchs et discussions
\begin_inset CommandInset label
LatexCommand label
name "subsec:Matchs-et-discussions"

\end_inset


\end_layout

\begin_layout Standard
Notez que vous pouvez aussi parler dans les salons des matchs,
 à condition de ne pas écrire comme seul élément de votre phrase une action au format textuel.
 En effet,
 si le match a commencé et que vous faites parti des joueurs,
 votre phrase sera interprétée comme une action de jeu.
 Par exemple,
 n'écrivez jamais juste 
\begin_inset Quotes eld
\end_inset

A1
\begin_inset Quotes erd
\end_inset

 ou 
\begin_inset Quotes eld
\end_inset

A2-B3
\begin_inset Quotes erd
\end_inset

 lors d'une conversation.
 Mais vous pouvez écrire à la place 
\begin_inset Quotes eld
\end_inset

Pourquoi tu as joué A1?
\begin_inset Quotes erd
\end_inset

 ou même juste 
\begin_inset Quotes eld
\end_inset

A1.
\begin_inset Quotes erd
\end_inset

 ou 
\begin_inset Quotes eld
\end_inset

A1?
\begin_inset Quotes erd
\end_inset

.
 De manière générale,
 évitez autant que possible de discuter dans le salon des matchs pour ne pas le polluer,
 au moins durant les matchs.
 
\end_layout

\begin_layout Subsubsection
Mise en garde sur la modification / suppression des messages
\begin_inset CommandInset label
LatexCommand label
name "subsec:Mise-en-garde"

\end_inset


\end_layout

\begin_layout Standard
Discord vous permet de modifier et supprimer vos messages.
 Lors d'un match que cela soit vous ou votre bot,
 n'utilisez sous aucun prétexte cette fonctionnalité.
 Il y a une chance faible mais non négligeable que cela entraine une instabilité du système empêchant de finir la partie.
 Si un tel événement se produit,
 vous serez considéré responsable et vous perdrez la partie.
 Si vous modifiez votre action par erreur,
 remodifiez votre message pour remettre l'action initiale.
 Il ne devrait alors y avoir aucun problème.
 Si vous supprimez votre action par erreur,
 c'est malheureusement définitif et il faut espérer que cela n'impactera pas la suite de la partie.
 En cas de soucis,
 contactez un organisateur.
 
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename interface.png
	scale 50

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Discord App
\begin_inset CommandInset label
LatexCommand label
name "fig:Discord-App"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename interface_serveurs.png
	scale 50

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Discord servers list (red box)
\begin_inset CommandInset label
LatexCommand label
name "fig:Discord-servers-list"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename interface_salons.png
	scale 50

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Discord channel list (red box)
\begin_inset CommandInset label
LatexCommand label
name "fig:Discord-channel-list"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename interface_zone_de_saisie.png
	scale 50

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Discord input area for conversation and match playing (red box)
\begin_inset CommandInset label
LatexCommand label
name "fig:Discord-input-area"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename interface_conversation.png
	scale 50

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Discord conversation / match history (red box)
\begin_inset CommandInset label
LatexCommand label
name "fig:Discord-conversation"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Lancement d'une partie
\begin_inset CommandInset label
LatexCommand label
name "subsec:Lancement-d'une-partie"

\end_inset


\end_layout

\begin_layout Standard
Nous entrons maintenant dans le vif du sujet et présentons ce qu'il faut savoir et comment faire pour lancer une partie.
\end_layout

\begin_layout Subsubsection
Choix du jeu et des autres paramètres
\end_layout

\begin_layout Standard
Pour choisir le jeu du match,
 écrivez dans la discussion :
 
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

!set game <GAME_NAME>
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Example
\begin_inset Quotes eld
\end_inset

!set game Clobber
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Remark
Si cela a marché,
 le bot arbitre écrira dans la conversation:
 
\begin_inset Quotes eld
\end_inset

Game set to <GAME_NAME>
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Pour connaitre les jeux disponibles,
 vous pouvez écrire dans la conversation la commande suivante :
 
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

!available_games
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Si vous avez besoin de modifier le temps total accordé à chaque joueur par partie (défaut 30 minutes par joueur par partie),
 vous pouvez utiliser la commande:
 
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

!time <T>
\begin_inset Quotes erd
\end_inset

 
\end_layout

\begin_layout Standard
avec <T> un nombre entier indiquant le temps en secondes ou un entier collé à un des mots suivants 
\begin_inset Quotes eld
\end_inset

s
\begin_inset Quotes erd
\end_inset

,
 
\begin_inset Quotes eld
\end_inset

min
\begin_inset Quotes erd
\end_inset

,
 
\begin_inset Quotes eld
\end_inset

h
\begin_inset Quotes erd
\end_inset

 pour spécifier l'unité (par exemple 
\begin_inset Quotes eld
\end_inset

!time 20min
\begin_inset Quotes erd
\end_inset

 ou 
\begin_inset Quotes eld
\end_inset

!time 1h
\begin_inset Quotes erd
\end_inset

).
 
\end_layout

\begin_layout Remark
Si vous avez besoin de jouer une série de matchs sur le même jeu,
 il n'est pas nécessaire de fixer le jeu avant chaque lancement.
\end_layout

\begin_layout Subsubsection
Cas particulier du mode de Jeu Free_game
\end_layout

\begin_layout Standard
Le DCOI offre la possibilité de jouer à n'importe quel jeu à information parfaite sans hasard grâce au 
\begin_inset Quotes eld
\end_inset

pseudo-jeu
\begin_inset Quotes erd
\end_inset

 nommé 
\begin_inset Quotes eld
\end_inset

Free_game
\begin_inset Quotes erd
\end_inset

.
 Notez toutefois que,
 sans que cela soit restrictif en pratique,
 les joueurs doivent jouer alternativement (c'est-à-dire jamais deux fois de suite).
 Ce dernier permet ainsi de jouer des matchs sur de tels jeux mais avec la contre-partie suivante :
 il n'y a pas de vérification des coups licites ni de détermination de vainqueur et les participants doivent jouer (écrire) à tour de rôle l'action 
\begin_inset Quotes eld
\end_inset

end
\begin_inset Quotes erd
\end_inset

 pour mettre fin à la partie.
 Cette fonctionnalité n'est donc à utiliser que si les participants sont sûr de jouer selon les mêmes règles et qu'ils disposent évidemment chacun leur propre moteur de jeu.
 Pour utiliser Free_game,
 faites:
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

!set game Free_game
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Les actions autorisées avec ce jeu sont toutes les actions vérifiant la syntaxe des actions du DCOI (par exemple 
\begin_inset Quotes eld
\end_inset

A1
\begin_inset Quotes erd
\end_inset

,
 
\begin_inset Quotes eld
\end_inset

B2-C3
\begin_inset Quotes erd
\end_inset

,
 
\begin_inset Quotes eld
\end_inset

D4-E17-H23
\begin_inset Quotes erd
\end_inset

 ;
 voir la Section 
\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Syntaxe-des-actions"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

) auquel l'action 
\begin_inset Quotes eld
\end_inset

end
\begin_inset Quotes erd
\end_inset

 est rajoutée.
 Toutefois,
 vous pouvez aussi rajouter des actions spéciales au jeu Free_game avec la commande:
 
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

!add_freegame_moves
\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Standard
Vous pouvez afficher les actions spéciales additionnelles de Free_game avec la commande:
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

!show_extra_freegame_moves
\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Standard
Et vous pouvez retirer toutes les actions spéciales de Free_game avec la commande:
 
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

!clear_freegame_moves
\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Standard
Ces commandes sont bien évidemment à utiliser avant le début de la partie.
\end_layout

\begin_layout Subsubsection
Déclanchement de la partie
\end_layout

\begin_layout Standard
Nous nous intéressons maintenant sur comment réaliser en pratique le match.
 La première étape est de demander à l'arbitre de proposer une partie.
 Il faut utiliser la commande:
 
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

!start @<Discord_Player_ID_1> @<Discord_Player_ID_2>
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Pour gagner du temps,
 vous pouvez utiliser l'alias 
\begin_inset Quotes eld
\end_inset

!s
\begin_inset Quotes erd
\end_inset

 à la place de 
\begin_inset Quotes eld
\end_inset

!start
\begin_inset Quotes erd
\end_inset

.
 Pour écrire cette commande un peu technique,
 commencez par écrire 
\begin_inset Quotes eld
\end_inset

!start @
\begin_inset Quotes erd
\end_inset

,
 Discord va alors vous afficher une liste des identifiants disponibles.
 Utiliser flèches du haut/bas pour choisir l'identifiant du premier joueur du match et faites 
\begin_inset Quotes eld
\end_inset

entrée
\begin_inset Quotes erd
\end_inset

.
 S'il n'est pas dans la liste,
 vous pouvez commencer à écrire son nom,
 jusqu'à ce qu'il apparaisse dans la liste.
 Notez que juste écrire son nom ne fonctionne pas,
 il faut toujours le sélectionner dans la liste puis valider par 
\begin_inset Quotes eld
\end_inset

entrée
\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Standard
Ecrivez ensuite 
\begin_inset Quotes eld
\end_inset

 @
\begin_inset Quotes erd
\end_inset

 et sélectionnez de la même façon le second joueur.
 Si l'un des joueurs utilise un bot,
 c'est l'identifiant de son bot qu'il faut utiliser et non l'identifiant de l'opérateur du bot.
 En outre,
 si l'un des joueurs utilise un bot,
 ce dernier doit être lancé avant que la commande !start ne soit écrite.
 
\begin_inset Note Note
status open

\begin_layout Plain Layout
Notez qu'il y a un bug rare de discord où une partie des joueurs / bots disponibles disparaissent du selecteur @.
 Ce bug se règle tout seul mais cela peut prendre du temps (heures voir jours).
 Cependant,
 il est possible de contourner simplement le bug de deux façons.
 On peut tout simplement utiliser un autre salon.
 Mais on peut aussi écrire la commande dans un autre salon et la copier coller dans le salon qui nous intéresse.
 Garder toujours un salon vide de toute écriture,
 car c'est apparemment l'envoi de messages qui provoque cet étrange bug.
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Une fois la commande exécutée,
 l'arbitre affiche le détail de la partie proposée (voir la Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:waiting_start"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
 Les participants doivent alors cliquer sur le 
\begin_inset Quotes eld
\end_inset

pouce vers le haut
\begin_inset Quotes erd
\end_inset

 en bas du message pour valider la partie.
 Si vous utilisez un bot,
 cela est prévu par la librairie,
 vous n'avez rien à faire.
 Dans la configuration actuelle,
 les joueurs ont alors 15 minutes pour accepter la dite partie.
 Lorsque tous les joueurs ont cliqué sur le pouce,
 la partie débute.
 Si vous souhaitez décliner la proposition de partie:
 cliquez sur le 
\begin_inset Quotes eld
\end_inset

pouce vers le bas
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Remark
Il est normal d'avoir le chiffre 1 pour les pouces haut et bas.
 C'est l'arbitre qui a ajouté ces réactions pour les rendre visible et faciliter leurs ajouts.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename start_attente_de_reponse.png
	lyxscale 50
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Example of the beginning of a match (example of waiting for player confirmation to start the game)
\begin_inset CommandInset label
LatexCommand label
name "fig:waiting_start"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Déroulement et fin de la partie
\end_layout

\begin_layout Standard
Lors d'une partie,
 l'arbitre indique lorsqu'un joueur doit jouer.
 Il écrit dans la conversation une phrase du type 
\begin_inset Quotes eld
\end_inset

@<PLAYER> must play (he has <TIME> left)
\begin_inset Quotes erd
\end_inset

.
 A ce moment là,
 le joueur concerné peut écrire dans la conversation l'action choisie par son programme.
 Un joueur ne doit pas écrire avant qu'on lui a dit explicitement de jouer.
 La Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Début-d'une-partie"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

 représente un début de partie,
 correspondant à la section d'action suivante :
 
\begin_inset Quotes eld
\end_inset

J4-I5
\begin_inset Quotes erd
\end_inset

 puis 
\begin_inset Quotes eld
\end_inset

C5
\begin_inset Quotes erd
\end_inset

 (le premier joueur joue deux fois d'affilé).
 Remarquez que l'arbitre valide les actions en les annotant par un carré vert.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename start.png
	lyxscale 50
	scale 50

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Example of the beginning of a match
\begin_inset CommandInset label
LatexCommand label
name "fig:Début-d'une-partie"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Si l'action écrite est incorrecte,
 l'action est annotée par un carré rouge et l'arbitre signale l'erreur et fourni la liste des actions licites (voir la Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Invalid-move"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename invalid_move.png
	lyxscale 50
	scale 50

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Example of invalid move
\begin_inset CommandInset label
LatexCommand label
name "fig:Invalid-move"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Lorsque la partie est finie,
 l'arbitre le signale et indique le vainqueur (voir la Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Example-of-endgame"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename endgame.png
	lyxscale 50
	scale 50

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Example of endgame
\begin_inset CommandInset label
LatexCommand label
name "fig:Example-of-endgame"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Une fois la partie finie,
 vous pouvez lancer un nouveau match avec la commande !start.
\end_layout

\begin_layout Subsubsection
Fin de match non standard:
 timeout / abandon
\end_layout

\begin_layout Standard
Nous nous intéressons maintenant aux fins de parties spéciales,
 déclanchées par un dépassement de temps de réflexion (par défaut 30 minutes par partie par joueur) ou par la décision d'un joueur.
\end_layout

\begin_layout Standard
Si un joueur dépasse son temps de réflexion,
 la partie se termine et ce joueur perd la partie (voir la Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Example-of-timeout"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
 
\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename timeout.png
	lyxscale 50
	scale 50

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Example of timeout
\begin_inset CommandInset label
LatexCommand label
name "fig:Example-of-timeout"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Si vous avez besoin d'arrêter une partie en cours,
 vous pouvez utiliser la commande 
\begin_inset Quotes eld
\end_inset

!stop
\begin_inset Quotes erd
\end_inset

.
 Cela va déclencher un vote.
 Cette commande ne fonctionne pas pour le moment si vous utilisez un bot Discord.
\end_layout

\begin_layout Standard
Si vous souhaitez abandonner une partie,
 lorsque c'est à vous de jouer,
 vous pouvez jouer l'action resign (écrivez 
\begin_inset Quotes eld
\end_inset

resign
\begin_inset Quotes erd
\end_inset

) .
 Cela va mettre fin à la partie et faire gagner votre adversaire (sans déclancher de vote).
 Si vous utilisez un bot:
 utilisez à la place la commande 
\begin_inset Quotes eld
\end_inset

!resign
\begin_inset Quotes erd
\end_inset

.
 Lorsque cela sera à votre bot de jouer,
 il jouera alors l'action 
\begin_inset Quotes eld
\end_inset

resign
\begin_inset Quotes erd
\end_inset

 qui déclanchera ainsi la fin de la partie.
\end_layout

\begin_layout Subsubsection
Syntaxe des actions (format textuel)
\begin_inset CommandInset label
LatexCommand label
name "subsec:Syntaxe-des-actions"

\end_inset


\end_layout

\begin_layout Standard
Avec le DCOI,
 il faut bien distinguer deux choses,
 la syntaxe des actions et les actions licites.
 Pour que le DCOI puisse différencier une conversation normal d'une action de jeu,
 le DCOI a besoin d'une syntaxe.
 Cette syntaxe inclut les actions du type 
\begin_inset Quotes eld
\end_inset

A1
\begin_inset Quotes erd
\end_inset

,
 
\begin_inset Quotes eld
\end_inset

B2-C12
\begin_inset Quotes erd
\end_inset

,
 mais aussi 
\begin_inset Quotes eld
\end_inset

D5-E3-G15
\begin_inset Quotes erd
\end_inset

 combinés à des mots clefs spécifiques,
 par exemple 
\begin_inset Quotes eld
\end_inset

queen-A8
\begin_inset Quotes erd
\end_inset

.
 Notez que 
\begin_inset Quotes eld
\end_inset

resign
\begin_inset Quotes erd
\end_inset

 est un exemple de mot clé commun à tous les jeux.
 Pour connaitre la liste des mots clefs du jeu courant,
 il faut utiliser la commande:
\end_layout

\begin_layout Standard
\align center
!show_move_keywords.
\end_layout

\begin_layout Standard
Notez que la syntaxe générale des actions de jeu est définie par l'expression régulière suivante:
 
\end_layout

\begin_layout Standard
\align center
([a-zA-Z][0-9]{1,2} | mot-clé-1 | ...
 | mot-clé-n)(-([a-zA-Z][0-9]{1,2} | mot-clé-1 | ...
 | mot-clé-n))*.
\end_layout

\begin_layout Standard
Autrement dit,
 une action au format textuel est une séquence de blocs de longueur supérieure ou égale à 1,
 séparés par des tirets qui sont soit une coordonnée (e.g.
 A12,
 B5,
 C18) soit un mot-clé.
\end_layout

\begin_layout Standard
Lorsqu'un texte est écrit dans la conversation,
 le bot arbitre vérifie si le texte respecte la syntaxe attendue.
 Si c'est le cas et si c'est à ce joueur de jouer,
 il va tenté de jouer cette action.
 Si cette action est valide,
 il la joue,
 sinon il signale que l'action n'est pas licite,
 comme décrit précédemment.
 Si la syntaxe n'est pas vérifiée,
 l'arbitre ignore tout simplement le texte.
\end_layout

\begin_layout Subsection
Logging des matchs
\begin_inset CommandInset label
LatexCommand label
name "subsec:Logging-des-matchs"

\end_inset


\end_layout

\begin_layout Standard
Les parties sont sauvegardées dans des fichiers .json (dans le dossier discord_interface/log/bot_play_log/),
 au format 
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

play_<PLAYER_ID>_Computer-Olympiad_<CHANNEL_NAME>_<DATE>_<TIME>.json
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Ce fichier contient un dictionnaire Python lisible par un humain possédant de nombreux attributs,
 et en particuliers les suivants:
 game_name,
 moves (history of moves of the match),
 players (list of PLAYER_ID),
 winner (True if you or your bot has won).
\end_layout

\begin_layout Subsection
Avertissement sur les parties trop courtes
\begin_inset CommandInset label
LatexCommand label
name "subsec:Avertissement-sur-les"

\end_inset


\end_layout

\begin_layout Standard
Notez qu'il y a une perte de temps lors de la communication des actions dû à la latence internet (qui dépend de la qualité de votre connexion) mais également de la latence de Discord et aussi dans une moindre mesure de celle du DCOI.
 Cela se compte en secondes,
 en moyenne autour d'une seconde.
 DCOI n'est donc pas adapté pour jouer des matchs avec un temps moyen de 1 seconde par action.
 En outre,
 et de toute façon,
 l'envoi de plus d'un message par seconde par un bot ou un utilisateur enfreint le contrat d'utilisation de Discord qui intreprète un tel comportement comme du flood.
 Ce comportement peut mener à diverses punitions (bans,
 shadows bans,
 ralentissement des fonctions discord,
 ...).
 Avec l'envoi d'actions de l'ordre de la seconde,
 nous n'avons cependant jamais rencontré de problèmes en pratique lors de nos nombreux tests.
 
\end_layout

\begin_layout Section
Jeu automatisé par bot Discord
\begin_inset CommandInset label
LatexCommand label
name "sec:Jeu-automatisé-par"

\end_inset


\end_layout

\begin_layout Standard
Dans cette section,
 nous allons expliquer les différentes façons de réaliser un match avec le DCOI en mode automatique.
\end_layout

\begin_layout Standard
Dans tous les cas,
 le jeu automatisé s'effectue grâce à un bot Discord joueur.
 Cela requiert de créer un 
\begin_inset Quotes eld
\end_inset

compte
\begin_inset Quotes erd
\end_inset

 bot Discord sur le site développeur de Discord (voir la section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Création-du-compte"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
 Ensuite,
 la façon native de faire des matchs en mode automatique est d'étendre une des classes Player Python du DCOI (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Programmation-d'un-Bot-python"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
 L'autre façon,
 décrite dans la Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Utilisation-du-Bot-GTP"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

,
 est d'utiliser un bot déjà intégralement implémenté qui communique avec votre programme grâce aux entrées-sorties (Inter-process communication) en utilisant le Go Text Protocol (GTP).
 Cette deuxième méthode offre donc l'avantage de ne pas requérir de programmation utilisant la librairie du DCOI et donc de connaitre le langage Python.
\end_layout

\begin_layout Standard
Enfin,
 dans la Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Fonctionnalités-avancées"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

,
 nous présentons des fonctionnalités avancées liées aux bots.
\end_layout

\begin_layout Standard
Nous commençons par détailler l'installation des packages Python requis par le DCOI.
\end_layout

\begin_layout Subsection
Installation des packages requis du DCOI
\end_layout

\begin_layout Standard
Nous détaillons maintenant l'installation du DCOI.
 Notez que Python 3.10+ est requis pour installer et utiliser le DCOI.
\end_layout

\begin_layout Standard
Pour effectuer l'installation des packages du DCOI,
 vous avez deux méthodes:
\end_layout

\begin_layout Remark
Si vous utilisez Python pour vos travaux,
 afin de ne risquer de casser les dépendances,
 nous vous invitons à utiliser un environnement virtuel python.
\end_layout

\begin_layout Paragraph
Méthode rapide:
\end_layout

\begin_layout Standard
Exécutez dans le terminal:
 
\end_layout

\begin_layout Itemize
\begin_inset Quotes eld
\end_inset

cd discord_interface
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Quotes eld
\end_inset

chmod +x install.sh
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Itemize
\begin_inset Quotes eld
\end_inset

bash install.sh
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Itemize
(optionnel) Test de l'installation:
 exécutez dans le terminal:
 
\begin_inset Quotes eld
\end_inset

python3 test_installation.py
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Remark
Si vous déplacez le fichier discord_interface,
 vous devrez relancer 
\begin_inset Quotes eld
\end_inset

bash install.sh
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Paragraph
Méthode pas à pas
\end_layout

\begin_layout Standard
Le DCOI est basé sur la librairie Python officielle de Discord.
 Pour pouvoir utiliser la librairie du DCOI,
 vous avez donc besoin de l'installer.
 Pour ce faire,
 exécutez dans votre terminal:
 
\begin_inset Quotes eld
\end_inset

python3 -m pip install -U discord.py
\begin_inset Quotes erd
\end_inset

.
 Vous avez aussi besoin de la librairie numpy pour faire tourner les jeux:
 
\begin_inset Quotes eld
\end_inset

python3 -m pip install -U numpy
\begin_inset Quotes erd
\end_inset

.
 Si vous souhaitez utiliser GTP,
 vous avez besoin en plus de la librairie 
\begin_inset Quotes eld
\end_inset

pexpect
\begin_inset Quotes erd
\end_inset

 pour permettre les communications inter-processus,
 exécutez :
 
\begin_inset Quotes eld
\end_inset

pip install pexpect
\begin_inset Quotes erd
\end_inset

.
 Vous pouvez ensuite tester l'installation en exécutant dans le terminal:
 
\begin_inset Quotes eld
\end_inset

python3 test_installation.py
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Remark
Si vous utilisez GTP,
 si besoin,
 il est possible de se passer de la dépendance à numpy:
 me contacter pour que je modifie le code en conséquence.
\end_layout

\begin_layout Standard
Enfin,
 vous devez modifier le python path pour ajouter le dossier parent de 
\begin_inset Quotes eld
\end_inset

discord_interface
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{verbatim}
\end_layout

\begin_layout Plain Layout

UPPER_DIR_DCOI='<path_to_discord_interface>'
\end_layout

\begin_layout Plain Layout

echo 'export PYTHONPATH=$PYTHONPATH:'$UPPER_DIR_DCOI >> ~/.bashrc
\end_layout

\begin_layout Plain Layout

source ~/.bashrc
\end_layout

\begin_layout Plain Layout


\backslash
end{verbatim}
\end_layout

\end_inset


\end_layout

\begin_layout Remark
Si vous déplacez le fichier discord_interface,
 vous devrez modifier le PYTHON PATH avec le nouveau chemin.
\end_layout

\begin_layout Subsection
Création du compte de votre bot Discord Joueur
\begin_inset CommandInset label
LatexCommand label
name "subsec:Création-du-compte"

\end_inset


\end_layout

\begin_layout Standard
Nous nous intéressons maintenant à la création du compte de votre bot,
 qui permet au programme du bot de se connecter à l'application Discord.
 Plus précisément,
 cette série d'étapes permet de récupérer diverses informations.
 Certaines de ces informations doivent être saisies dans le fichier de configuration 
\begin_inset Quotes eld
\end_inset

parameters.conf
\begin_inset Quotes erd
\end_inset

 à la racine du dossier discord_interface.
 La création du compte permet également de récupérer un lien à transmettre à l'organisateur pour qu'il ajoute votre bot sur le serveur Discord de la compétition.
\end_layout

\begin_layout Subsubsection
Créer le compte du bot et inviter le bot dans le serveur
\begin_inset CommandInset label
LatexCommand label
name "subsec:Créer-le-compte-de-bot"

\end_inset


\end_layout

\begin_layout Enumerate
Allez sur le site web 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://discord.com/developers/applications
\end_layout

\end_inset

.
 Il faut vous connecter avec votre compte discord.
 Vous devez ensuite cliquer sur « New Application » en haut à droite de l’écran (si besoin,
 voir la Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:New-Application"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

) et donner un nom au bot.
 Vous arrivez alors sur la page du bot.
\end_layout

\begin_deeper
\begin_layout Enumerate
changez de navigateur internet en cas de difficulté
\end_layout

\end_deeper
\begin_layout Enumerate
Il faut ensuite activer l'option "Message Content Intent" dans l'onglet Bot (si besoin,
 voir la Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Bot-window-and"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\end_layout

\begin_layout Enumerate
Puis,
 il faut récupérer le TOKEN du bot,
 c'est en quelque sorte son mot de passe (il doit donc être gardé secret).
 Notez le quelque part,
 nous en aurons besoin pour spécifier le fichier de configuration dans la section suivante.
 
\end_layout

\begin_deeper
\begin_layout Enumerate
Allez sur l'onglet Bot (toujours sur la page du bot).
 Dans la Section TOKEN,
 cliquez sur le bouton 
\begin_inset Quotes eld
\end_inset

Reset Token
\begin_inset Quotes erd
\end_inset

 (si besoin,
 voir la Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Reset-Token-button"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\end_layout

\end_deeper
\begin_layout Enumerate
Allez ensuite sur l'onglet OAuth2,
 section 
\begin_inset Quotes eld
\end_inset

OAuth2 URL Generator
\begin_inset Quotes erd
\end_inset

,
 sous-section 
\begin_inset Quotes eld
\end_inset

SCOPES
\begin_inset Quotes erd
\end_inset

.
 Cochez l'option 
\begin_inset Quotes eld
\end_inset

bot
\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Puis dans la sous-section suivante 
\begin_inset Quotes eld
\end_inset

bot permissions
\begin_inset Quotes erd
\end_inset

,
 cochez les options suivantes :
 "View Channels",
 "Send Messages",
 "Read Message History",
 "Add Reactions".
 
\end_layout

\begin_layout Enumerate
Pour terminer,
 allez en bas de la page,
 dans la zone 
\begin_inset Quotes eld
\end_inset

Generated URL
\begin_inset Quotes erd
\end_inset

 et copier l'url.
 Transmettez cet url à l'organisateur pour qu'il ajoute votre bot sur le serveur.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename new_application.png
	lyxscale 25
	scale 15

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
New application button (red box)
\begin_inset CommandInset label
LatexCommand label
name "fig:New-Application"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename message content intent.png
	lyxscale 25
	scale 15

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Bot window and message content intent option to be activated (red boxes)
\begin_inset CommandInset label
LatexCommand label
name "fig:Bot-window-and"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename token.png
	lyxscale 25
	scale 15

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Reset Token button (red box)
\begin_inset CommandInset label
LatexCommand label
name "fig:Reset-Token-button"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Récupération de votre identifiant Discord (optionnel mais recommandé)
\begin_inset CommandInset label
LatexCommand label
name "subsec:Récupération-de-votre"

\end_inset


\end_layout

\begin_layout Standard
Ensuite,
 il est suggéré de récupérer votre identifiant Discord pour le spécifier dans le fichier de configuration.
 C'est optionnel,
 mais cela permet d'utiliser des commandes contrôlant votre bot pour accéder à certaines fonctionnalités.
 Par exemple,
 c'est requis pour pouvoir reprendre un match en cours après un crash (voir la Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Fonctionnalités-avancées"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
 Nous décrivons dans cette section comment récupérer votre identifiant Discord.
\end_layout

\begin_layout Standard
La première chose à faire est d'activer le mode développeur de son compte discord.
 Pour se faire:
\end_layout

\begin_layout Enumerate
Ouvrir l'application Discord
\end_layout

\begin_layout Enumerate
Allez dans les paramètres (cliquez sur le bouton 
\begin_inset Quotes eld
\end_inset

engrenage
\begin_inset Quotes erd
\end_inset

,
 si besoin voir la Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Discord-parameters-button"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
 
\end_layout

\begin_layout Enumerate
Cliquez sur l'onglet 
\begin_inset Quotes eld
\end_inset

Advanced
\begin_inset Quotes erd
\end_inset

 .
 
\end_layout

\begin_layout Enumerate
Activez l'option 
\begin_inset Quotes eld
\end_inset

developer mode
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Enumerate
Cliquez en bas à droite sur votre nom.
 
\end_layout

\begin_layout Enumerate
En bas,
 dans la mini-fenêtre,
 cliquez sur 
\begin_inset Quotes eld
\end_inset

Copier l'identifiant de l'utilisateur
\begin_inset Quotes erd
\end_inset

 (si besoin voir la Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Open-owner-window"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\end_layout

\begin_layout Enumerate
Retournez dans les paramètres et désactivez l'option 
\begin_inset Quotes eld
\end_inset

developer mode
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename interface_paramètres.png
	scale 50

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Discord parameters button (red box)
\begin_inset CommandInset label
LatexCommand label
name "fig:Discord-parameters-button"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename advanced.png
	lyxscale 50
	scale 25

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Discord advanced window and developper mode option (red boxes)
\begin_inset CommandInset label
LatexCommand label
name "fig:Discord-advanced-window"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename Owner id.png
	lyxscale 25
	scale 15

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Open owner window and copy Owner ID (red boxes)
\begin_inset CommandInset label
LatexCommand label
name "fig:Open-owner-window"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Spécification du fichier de configuration
\end_layout

\begin_layout Standard
Nous décrivons maintenant comment spécifier le fichier de configuration,
 
\begin_inset Quotes eld
\end_inset

parameters.conf
\begin_inset Quotes erd
\end_inset

 situé à la racine du dossier 
\begin_inset Quotes eld
\end_inset

discord_interface
\begin_inset Quotes erd
\end_inset

,
 qui permet au programme de bot d'accéder à Discord.
\end_layout

\begin_layout Enumerate
Spécifier la valeur de 
\begin_inset Quotes eld
\end_inset

PLAYER_BOT_DISCORD_TOKEN
\begin_inset Quotes erd
\end_inset

 par le TOKEN du compte du bot (récupéré lors de la Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Créer-le-compte-de-bot"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\end_layout

\begin_layout Enumerate
Optionnel mais recommandé,
 spécifier la valeur de 
\begin_inset Quotes eld
\end_inset

OWNER_ID
\begin_inset Quotes erd
\end_inset

 par votre identifiant Discord (récupéré lors de la Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Récupération-de-votre"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\end_layout

\begin_layout Standard
Si vous souhaitez vérifier que le fichier de configuration est correctement spécifié,
 lancez votre bot et faites:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{verbatim}
\end_layout

\begin_layout Plain Layout

cd <discord_interface_path>/discord_interface 
\end_layout

\begin_layout Plain Layout

python3 main_random_ai.py
\end_layout

\begin_layout Plain Layout


\backslash
end{verbatim}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
S'il y a dans le terminal l'erreur 
\begin_inset Quotes eld
\end_inset

Bad OWNER_ID
\begin_inset Quotes erd
\end_inset

,
 il faut donc corriger la variable OWNER_ID dans 
\begin_inset Quotes eld
\end_inset

parameters.conf
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Pour un test avancé,
 lancez votre bot et écrivez dans un salon du serveur discord de la compétition:
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

!conf_test
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Itemize
Si rien ne se passe,
 contactez-moi.
\end_layout

\begin_layout Itemize
Si tout marche bien,
 
\begin_inset Quotes eld
\end_inset

All is OK!
\begin_inset Quotes erd
\end_inset

 est inscrit dans le terminal.
\end_layout

\begin_layout Itemize
Si une erreur se déclanche dans le terminal (discord.errors.LoginFailure:
 Improper token has been passed):
 le PLAYER_BOT_DISCORD_TOKEN a été mal spécifié.
\end_layout

\begin_layout Subsection
Programmation d'un bot Discord grâce à Python
\begin_inset CommandInset label
LatexCommand label
name "subsec:Programmation-d'un-Bot-python"

\end_inset


\end_layout

\begin_layout Standard
Nous décrivons maintenant comment programmer un bot Discord en Python.
 Il faut hériter une des classes Python 
\begin_inset Quotes eld
\end_inset

Player
\begin_inset Quotes erd
\end_inset

 proposées dans la librairie du DCOI.
 Nous décrivons ici la manière la plus simple de le faire.
\end_layout

\begin_layout Paragraph
Programmation du bot
\end_layout

\begin_layout Standard
Pour programmer votre bot,
 il faut hériter la classe BasicPlayer du fichier 
\begin_inset Quotes eld
\end_inset

discord_interface/player/model/basic_player.py
\begin_inset Quotes erd
\end_inset

.
 La seule chose que vous avez à faire est de définir la méthode my_plays(self,
 game_history,
 time_left=inf,
 opponent_time_left=inf).
 Cette méthode doit retourner l'action que veut jouer votre programme dans l'état courant.
 L'état courant peut-être reconstruit à partir du paramètre game_history,
 qui contient la liste des actions au format textuel joué depuis le début de la partie.
 Il est également possible d'utiliser les méthodes de jeux natives fournies par le DCOI,
 ce qui permet de ne pas avoir besoin d'implémenter le jeu.
 Dans ce second cas d'usage,
 vous aurez besoin des méthodes décrites dans la Table
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Elementary-game-methods"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float table
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="8" columns="2">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
game methods of any player
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
self.game.get_numpy_board()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
return a numpy array representing the game board
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
self.game.get_current_player()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
returns 
\begin_inset Formula $i$
\end_inset

 if the current player is the player 
\begin_inset Formula $i$
\end_inset

 (
\begin_inset Formula $i\in\mathbb{N}$
\end_inset

) 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
self.game.textual_legal_moves()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
list of valid actions in text format (e.g.
 
\begin_inset Quotes eld
\end_inset

A1
\begin_inset Quotes erd
\end_inset

 or 
\begin_inset Quotes eld
\end_inset

A2-B3
\begin_inset Quotes erd
\end_inset

)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
self.game.ended()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
return True si the game is ended
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
self.game.winner
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
return the index 
\begin_inset Formula $i$
\end_inset

 of the winner player (
\begin_inset Formula $i\in\mathbb{N}$
\end_inset

) 
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
self.game.textual_plays(move)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
apply the move in the current game state (i.e.self.game)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
self.game.undo()
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
undo the last action of the current game state (i.e.self.game)
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Elementary methods of any Player Python object for programming an AI player.
\begin_inset CommandInset label
LatexCommand label
name "tab:Elementary-game-methods"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Faites attention à la valeur du paramètre 
\begin_inset Quotes eld
\end_inset

time_left
\begin_inset Quotes erd
\end_inset

,
 il indique le temps qu'il reste à votre programme pour le reste du match.
 Si cette valeur atteint 0,
 vous perdez la partie.
 
\end_layout

\begin_layout Standard
Un exemple d'héritage est disponible dans la classe TextualRandomAI du fichier 
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

discord_interface/player/instances/textual_random_ai.py
\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Standard
Ce dernier est un bot qui joue aléatoirement sauf s'il y a un coup gagnant parmi les actions disponibles.
 Il le joue alors.
\end_layout

\begin_layout Paragraph
Lancement du bot
\end_layout

\begin_layout Standard
Une fois le compte de votre bot créé,
 le fichier de configuration spécifié en conséquence,
 et la classe Player hérité,
 il ne reste qu'à lancer votre bot dans un fichier main.
 Pour cela,
 il faut utiliser la méthode bot_starting(AI_Class) du fichier discord_interface/player/model/bot_launcher.py avec pour AI_Class votre AI Player.
 Un exemple de programme lanceur de bot est disponible dans le fichier 
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

discord_interface/main_random_ai.py
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Il ne vous reste plus qu'à faire 
\begin_inset Quotes eld
\end_inset

python3 votre_main.py
\begin_inset Quotes erd
\end_inset

 dans le dossier 
\begin_inset Quotes eld
\end_inset

discord_interface
\begin_inset Quotes erd
\end_inset

.
 Par exemple:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{verbatim}
\end_layout

\begin_layout Plain Layout

cd <discord_interface_path>/discord_interface 
\end_layout

\begin_layout Plain Layout

python3 main_textual_random_ai.py
\end_layout

\begin_layout Plain Layout


\backslash
end{verbatim}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Le bot attend désormais que la commande !s @<Bot_name_1> @<Bot_name_2> soit lancée et que le bot arbitre affiche les informations de la partie.
 A ce moment là,
 le bot effectue son initialisation puis ajoute son pouce.
 La partie commence et le bot joue automatiquement lorsque c'est à lui,
 jusqu'à la fin de la partie.
\end_layout

\begin_layout Remark
Si vous avez utilisé un environnement virtuel python lors de l'installation,
 n'oubliez pas de l'activer pour lancer le bot.
\end_layout

\begin_layout Paragraph
Fonctionnalités avancées
\end_layout

\begin_layout Standard
Pour finir,
 optionnellement,
 si vous avez besoin de fonctionnalités avancées,
 comme un code à effectuer à l'initialisation ou à la terminaison du match,
 vous pouvez hériter de la classe AdvancedBasicPlayer (fichier discord_interface/player/model/advanced_basic_player.py) et ainsi définir les méthodes my_initialisation(game_name) et my_end().
\end_layout

\begin_layout Subsection
Utilisation du bot Discord Joueur générique grâce au GTP
\begin_inset CommandInset label
LatexCommand label
name "subsec:Utilisation-du-Bot-GTP"

\end_inset


\end_layout

\begin_layout Standard
Nous décrivons maintenant comment réaliser des matchs de manière automatique en utilisant GTP.
 Des informations à propos de GTP sont disponibles par exemple sur ce site:
 
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://www.lysator.liu.se/~gunnar/gtp/gtp2-spec-draft2/gtp2-spec.html
\end_layout

\end_inset

.
 Nous verrons dans la Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Spécification-des-commandes"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

 comment spécifier un programme GTP.
 Nous commençons par décrire comment lancer le bot GTP,
 supposant que nous avons déjà un programme déjà spécifié au format GTP.
 Pour finir,
 nous verrons une fonction avancée permettant d'afficher des informations de votre programme dans le terminal (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Afficher-des-informations"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

) mais également comment gérer les erreurs de votre programme avec GTP (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Gestion-des-erreurs"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\end_layout

\begin_layout Subsubsection
Lancement du bot GTP
\end_layout

\begin_layout Standard
Nous commençons par expliquer les pré-requis pour lancer votre bot GTP.
 Premièrement,
 il faut connecter votre programme au bot GTP.
 Vous avez donc besoin de spécifier trois paramètres:
\end_layout

\begin_layout Itemize
\begin_inset Quotes eld
\end_inset

program_name
\begin_inset Quotes erd
\end_inset

 :
 le nom de votre programme joueur,
\end_layout

\begin_layout Itemize
\begin_inset Quotes eld
\end_inset

program_arguments
\begin_inset Quotes erd
\end_inset

:
 la liste des arguments de votre programme (séparés par des espaces),
\end_layout

\begin_layout Itemize
\begin_inset Quotes eld
\end_inset

program_directory
\begin_inset Quotes erd
\end_inset

:
 le chemin absolu de votre programme (ou le chemin relatif au dossier discord_interface,
 par exemple vous pouvez utiliser une chaine vide si le programme se trouve à la racine du dossier 
\begin_inset Quotes eld
\end_inset

discord_interface
\begin_inset Quotes erd
\end_inset

).
\end_layout

\begin_layout Standard
Ces variables doivent être spécifiées dans le fichier de configuration 
\begin_inset Quotes eld
\end_inset

parameters.conf
\begin_inset Quotes erd
\end_inset

 à la racine du dossier 
\begin_inset Quotes eld
\end_inset

discord_interface
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Pour exécuter votre programme,
 vous n'avez plus qu'à faire 
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

python3 main_gtp_ai_from_conf.py
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard
dans le terminal depuis la racine du dossier 
\begin_inset Quotes eld
\end_inset

discord_interface
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Remark
Si vous êtes à l'aise avec Python,
 vous pouvez aussi modifier et exécuter le fichier 
\begin_inset Quotes eld
\end_inset

main_gtp_ai.py
\begin_inset Quotes erd
\end_inset

 pour éviter de toucher au fichier de configuration.
\end_layout

\begin_layout Subsubsection
Spécification des commandes GTP
\begin_inset CommandInset label
LatexCommand label
name "subsec:Spécification-des-commandes"

\end_inset


\end_layout

\begin_layout Standard
Afin de pouvoir utiliser le bot basé GTP,
 il faut que votre programme lise dans l'entrée standard les commandes GTP (qui seront envoyées par le bot GTP) et écrive dans la sortie standard le résultat de ces commandes (qui seront ainsi lues et traitées par le bot GTP).
 
\end_layout

\begin_layout Remark
Pour cette raison,
 votre programme ne doit pas utiliser la sortie standard (stdout / stderr) sauf pour répondre à une commande GTP (ainsi,
 si vous avez besoin d'écrire quelque chose qui n'est pas une réponse GTP,
 écrivez-le par exemple à la place dans un fichier).
\end_layout

\begin_layout Standard
Les commandes GTP requises pour faire tourner le bot GTP,
 à implémenter dans votre programme,
 sont décrites dans la Table
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "tab:List-of-GTP-commands"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

.
 Remarquez que chaque commande doit retourner '=' éventuellement suivi d'une chaine de caractère.
 Pour vérifier que la spécification des commandes GTP est correcte,
 vous pouvez lancer le programme de test suivant dans le terminal:
 
\begin_inset Quotes eld
\end_inset

python3 test_gtp_ai_from_conf.py
\begin_inset Quotes erd
\end_inset

.
 En cas de problème,
 ouvrez le fichier 
\begin_inset Quotes eld
\end_inset

<program_name>_gtp.log
\begin_inset Quotes erd
\end_inset

 pour voir l'historique de la communication GTP.
\end_layout

\begin_layout Standard
\begin_inset Float table
placement document
alignment document
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
GTP command
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
return
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
effect
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
clear_board
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $=$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
restart the game
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
undo
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $=$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
cancel the last move
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
play <player> <move>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $=$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
plays <move> for <player>
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
time_left <player> <time>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $=$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
inform the time left in seconds
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
genmove <player>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $=$
\end_inset

<move>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
return the <move> to play and 
\series bold
play it
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
quit
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $=$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
shutdown the program
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
player
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $=$
\end_inset

<player>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
return the current player
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
game <game>
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Formula $=$
\end_inset


\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
initialization for <game>
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
List of GTP commands to implement,
 the syntax of their return and their expected effect (<move> is an action in text format (see the syntax in Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Syntaxe-des-actions"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

) ;
 <player> is an integer 
\begin_inset Formula $n\in\mathbb{N}$
\end_inset

 ;
 <game> is the game name of the match).
 Remark:
 commands 
\begin_inset Quotes eld
\end_inset

game
\begin_inset Quotes erd
\end_inset

 and 
\begin_inset Quotes eld
\end_inset

player
\begin_inset Quotes erd
\end_inset

 are not part of standard GTP ;
 they are optional (make them only return 
\begin_inset Quotes eld
\end_inset

=
\begin_inset Quotes erd
\end_inset

) ;
 
\begin_inset Quotes eld
\end_inset

game
\begin_inset Quotes erd
\end_inset

 is required only for multi-games participation ;
 
\begin_inset Quotes eld
\end_inset

player
\begin_inset Quotes erd
\end_inset

 is required only for profiling (see Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Bot-profiling"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\begin_inset CommandInset label
LatexCommand label
name "tab:List-of-GTP-commands"

\end_inset

.
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
Si besoin,
 un exemple de spécification en Python des commandes GTP est disponible dans le fichier 
\begin_inset Quotes eld
\end_inset

discord_interface/player/instances/autres/gtp_random_ai.py
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Remark
Exemple de communication GTP entre le bot et le programme joueur:
\end_layout

\begin_layout Remark
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{verbatim}
\end_layout

\begin_layout Plain Layout

genmove 0
\end_layout

\begin_layout Plain Layout

=A2-A3
\end_layout

\begin_layout Plain Layout

play 1 A7-A6
\end_layout

\begin_layout Plain Layout

=
\end_layout

\begin_layout Plain Layout

genmove 0
\end_layout

\begin_layout Plain Layout

=A3-A4
\end_layout

\begin_layout Plain Layout

...
\end_layout

\begin_layout Plain Layout


\backslash
end{verbatim}
\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Remark
Si vous souhaitez que votre bot ait la capacité d'abandonner automatiquement,
 il suffit qu'il retourne 
\begin_inset Quotes eld
\end_inset

=resign
\begin_inset Quotes erd
\end_inset

 suite à la commande 
\begin_inset Quotes eld
\end_inset

genmove
\begin_inset Quotes erd
\end_inset

,
 au moment approprié.
 
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Remark
Si vous souhaitez faire abandonner votre bot manuellement,
 utilisez la commande déjà fonctionnelle 
\begin_inset Quotes eld
\end_inset

!resign
\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Remark
Si vous souhaitez utiliser la nomenclature du Go pour GTP,
 i.e.
 
\begin_inset Quotes eld
\end_inset

black
\begin_inset Quotes erd
\end_inset

 ou 
\begin_inset Quotes eld
\end_inset

b
\begin_inset Quotes erd
\end_inset

 à la place de 
\begin_inset Quotes eld
\end_inset

0
\begin_inset Quotes erd
\end_inset

 pour le premier joueur,
 
\begin_inset Quotes eld
\end_inset

white
\begin_inset Quotes erd
\end_inset

 ou 
\begin_inset Quotes eld
\end_inset

w
\begin_inset Quotes erd
\end_inset

 à la place de 
\begin_inset Quotes eld
\end_inset

1
\begin_inset Quotes erd
\end_inset

 pour le second joueur et que les actions soient au format minuscule et sans tiret (par exemple a2b3 au lieu de A2-B3),
 vous pouvez utiliser:
\end_layout

\begin_deeper
\begin_layout Itemize
\begin_inset Quotes eld
\end_inset

python3 main_go_gtp_ai_from_conf.py
\begin_inset Quotes erd
\end_inset

 à la place de 
\begin_inset Quotes eld
\end_inset

python3 main_gtp_ai_from_conf.py
\begin_inset Quotes erd
\end_inset

 et
\end_layout

\begin_layout Itemize
\begin_inset Quotes eld
\end_inset

python3 test_go_gtp_ai_from_conf.py
\begin_inset Quotes erd
\end_inset

 à la place de 
\begin_inset Quotes eld
\end_inset

python3 test_gtp_ai_from_conf.py
\begin_inset Quotes erd
\end_inset

.
\end_layout

\end_deeper
\begin_layout Subsubsection
Afficher des informations dans le terminal
\begin_inset CommandInset label
LatexCommand label
name "subsec:Afficher-des-informations"

\end_inset


\end_layout

\begin_layout Standard
Pour terminer,
 nous parlons brièvement d'une option qui permet,
 lors de l'utilisation du bot GTP,
 d'afficher dans le terminal des informations provenant de son programme.
\end_layout

\begin_layout Standard
La mise en place de cette fonctionnalité est très simple.
 A chaque return de commande GTP,
 il suffit de concaténer au return le symbole 
\begin_inset Quotes eld
\end_inset

#
\begin_inset Quotes erd
\end_inset

 suivi de la ligne à afficher dans le terminal.
 
\end_layout

\begin_layout Example
Si l'on veut afficher dans le terminal 
\begin_inset Quotes eld
\end_inset

Le coup a été correctement annulé
\begin_inset Quotes erd
\end_inset

 lorsque la commande 
\begin_inset Quotes eld
\end_inset

undo
\begin_inset Quotes erd
\end_inset

 est exécutée,
 le return du undo doit être 
\begin_inset Quotes eld
\end_inset

=#Le coup a été correctement annulé
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Notez que la ligne à afficher dans le terminal ne doit pas contenir de saut de ligne.
 Il est toutefois possible d'effectuer des sauts de lignes avec l'ajout de plusieurs 
\begin_inset Quotes eld
\end_inset

#
\begin_inset Quotes erd
\end_inset

.
 Chaque 
\begin_inset Quotes eld
\end_inset

#
\begin_inset Quotes erd
\end_inset

 supplémentaire sera alors interprété comme un saut de ligne.
\end_layout

\begin_layout Example
Si le return de la commande genmove est 
\begin_inset Quotes eld
\end_inset

=<move>#Calcul du prochain coup terminé#Coup joué <move>#Temps du calcul 15 secondes
\begin_inset Quotes erd
\end_inset

,
 cela affichera dans le terminal:
\end_layout

\begin_layout Standard
\begin_inset ERT
status open

\begin_layout Plain Layout


\backslash
begin{verbatim}
\end_layout

\begin_layout Plain Layout

Calcul du prochain coup terminé
\end_layout

\begin_layout Plain Layout

Coup joué <move>
\end_layout

\begin_layout Plain Layout

Temps du calcul 15 secondes
\end_layout

\begin_layout Plain Layout


\backslash
end{verbatim}
\end_layout

\end_inset


\end_layout

\begin_layout Subsubsection
Gestion des erreurs avec GTP
\begin_inset CommandInset label
LatexCommand label
name "subsec:Gestion-des-erreurs"

\end_inset


\end_layout

\begin_layout Standard
Si vous souhaitez avoir une gestion des erreurs avec GTP,
 c'est-à-dire que votre programme transmette au bot Discord qu'il y a eut une erreur,
 il faut utiliser la syntaxe GTP classique prévue à cette effet.
 Plus précisément,
 lorsqu'une erreur se produit et doit être communiquée,
 il faut écrire dans la sortie standard mais en modifiant le format de sortie en remplaçant 
\begin_inset Quotes eld
\end_inset

=<output_line>
\begin_inset Quotes erd
\end_inset

 par 
\begin_inset Quotes eld
\end_inset

?<output_line>
\begin_inset Quotes erd
\end_inset

.
 La présence du 
\begin_inset Quotes eld
\end_inset

?
\begin_inset Quotes erd
\end_inset

 permettra au bot Discord de lancer une erreur,
 qui sera notamment affichée dans le terminal.
 D'autres informations seront également affichées dans le terminal :
\end_layout

\begin_layout Itemize
le nom de la commande ayant déclanchée le 
\begin_inset Quotes eld
\end_inset

?
\begin_inset Quotes erd
\end_inset

,
 
\end_layout

\begin_layout Itemize
la sortie de votre programme et 
\end_layout

\begin_layout Itemize
l'affichage des commentaires (si vous avez mis en place la fonctionnalité de la section précédente).
\end_layout

\begin_layout Subsection
Fonctionnalités avancées
\begin_inset CommandInset label
LatexCommand label
name "subsec:Fonctionnalités-avancées"

\end_inset


\end_layout

\begin_layout Standard
Nous décrivons maintenant plusieurs fonctionnalités avancées des bots joueurs.
\end_layout

\begin_layout Subsubsection
Gestion des crashs 
\end_layout

\begin_layout Standard
Si pour une raison quelconque votre bot vient à planter et doit être re-exécuté.
 Il faut pour reprendre le match en cours,
 après avoir relancé son bot,
 utiliser la commande 
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

!continue
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Son alias est 
\begin_inset Quotes eld
\end_inset

!c
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Avant la compétition,
 je vous suggère d'effectuer un kill en cours de partie,
 de relancer et de vérifier que la commande !continue fonctionne correctement pour être sûr de pouvoir reprendre une partie en cas de problème.
\end_layout

\begin_layout Standard
Si le bot arbitre ne réagit pas,
 contactez un responsable de la compétition pour qu'il relance l'arbitre et exécute également la commande 
\begin_inset Quotes eld
\end_inset

!continue
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Subsubsection
Bot profiling
\begin_inset CommandInset label
LatexCommand label
name "subsec:Bot-profiling"

\end_inset


\end_layout

\begin_layout Standard
Du profilage peut être effectué avec la commande 
\begin_inset Quotes eld
\end_inset

!p
\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Remark
Si vous utilisez un bot GTP,
 certaines des valeurs fournies seront incorrectes si la commande GTP 
\begin_inset Quotes eld
\end_inset

player
\begin_inset Quotes erd
\end_inset

 n'a pas ou a été mal programmée.
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Section
Création d'un serveur de jeu Discord personnel
\begin_inset CommandInset label
LatexCommand label
name "sec:Création-d'un-serveur"

\end_inset


\end_layout

\begin_layout Standard
Nous expliquons dans cette section comment créer son serveur de jeu personnel,
 pour faire une beta test local pour les Computer Olympiad ou pour organiser sa propre compétition.
 Plusieurs étapes doivent être réalisées :
 création d'un serveur Discord (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Création-d'un-serveur"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

),
 création du 
\begin_inset Quotes eld
\end_inset

compte de bot
\begin_inset Quotes erd
\end_inset

 pour le bot arbitre (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Création-du-compte-arbitre"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

),
 invitation des joueurs sur le serveur (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Invitation-des-joueurs"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

),
 invitation des bots sur le serveur (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Invitation-des-bots"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

),
 et enfin,
 lancement du bot arbitre (Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Lancement-du-bot"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\end_layout

\begin_layout Subsection
Création d'un serveur Discord
\begin_inset CommandInset label
LatexCommand label
name "subsec:Création-d'un-serveur"

\end_inset


\end_layout

\begin_layout Standard
Nous commençons donc par détailler la création d'un serveur Discord:
\end_layout

\begin_layout Enumerate
Dans la barre verticale de vos serveurs Discord,
 située à gauche de l'application Discord:
\end_layout

\begin_deeper
\begin_layout Enumerate
cliquez sur le 
\begin_inset Quotes eld
\end_inset

+
\begin_inset Quotes erd
\end_inset

,
 puis 
\begin_inset Quotes eld
\end_inset

créer le mien
\begin_inset Quotes erd
\end_inset

 (choisissez vos options et son nom).
\end_layout

\end_deeper
\begin_layout Enumerate
Activez le 
\begin_inset Quotes eld
\end_inset

mode développeur
\begin_inset Quotes erd
\end_inset

 (étapes 1 à 4 de la Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Récupération-de-votre"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\end_layout

\begin_layout Enumerate
Clic gauche sur l'icone du serveur créé dans la barre des serveurs.
\end_layout

\begin_layout Enumerate
Cliquez sur 
\begin_inset Quotes eld
\end_inset

Copier l'identifiant du serveur
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Enumerate
Pour une beta test des Computer Olympiad:
\end_layout

\begin_deeper
\begin_layout Enumerate
Dans le fichier 
\begin_inset Quotes eld
\end_inset

parameters.conf
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Enumerate
dupliquez la ligne commençant par:
\end_layout

\begin_deeper
\begin_layout Enumerate
\begin_inset Quotes eld
\end_inset

BETA_TEST_COMPUTER_OLYMPIAD_GUILD_ID=
\begin_inset Quotes erd
\end_inset

.
\end_layout

\end_deeper
\begin_layout Enumerate
commentez la ligne originale avec 
\begin_inset Quotes eld
\end_inset

#
\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Enumerate
utilisez l'identifiant du serveur créé pour modifier la valeur de:
\end_layout

\begin_deeper
\begin_layout Enumerate
\begin_inset Quotes eld
\end_inset

BETA_TEST_COMPUTER_OLYMPIAD_GUILD_ID
\begin_inset Quotes erd
\end_inset

.
\end_layout

\end_deeper
\begin_layout Enumerate
verifiez que dans le fichier 
\begin_inset Quotes eld
\end_inset

parameters.conf
\begin_inset Quotes erd
\end_inset

,
 nous avons bien:
 
\end_layout

\begin_deeper
\begin_layout Enumerate
\begin_inset Quotes eld
\end_inset

BETA_TEST_MODE=True
\begin_inset Quotes erd
\end_inset

.
\end_layout

\end_deeper
\end_deeper
\begin_layout Enumerate
pour chaque bot arbitre (d'index 
\begin_inset Formula $i$
\end_inset

):
\end_layout

\begin_deeper
\begin_layout Enumerate
dans le serveur,
 créer un salon 
\begin_inset Quotes eld
\end_inset

match_
\shape slanted
i
\shape default

\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Enumerate
clic droit sur le salon:
 copier ID:
\end_layout

\begin_layout Enumerate
Dans le fichier 
\begin_inset Quotes eld
\end_inset

parameters.conf
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Enumerate
collez comme valeur de REFEREE_BOT_
\shape slanted
i
\shape default
_DISCORD_CHANNEL
\end_layout

\end_deeper
\end_deeper
\end_deeper
\begin_layout Enumerate
Pour un serveur à autre usage:
\end_layout

\begin_deeper
\begin_layout Enumerate
Dans le fichier 
\begin_inset Quotes eld
\end_inset

parameters.conf
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Enumerate
dupliquez la ligne commençant par:
\end_layout

\begin_deeper
\begin_layout Enumerate
\begin_inset Quotes eld
\end_inset

COMPUTER_OLYMPIAD_GUILD_ID=
\begin_inset Quotes erd
\end_inset

.
\end_layout

\end_deeper
\begin_layout Enumerate
commentez la ligne originale avec 
\begin_inset Quotes eld
\end_inset

#
\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Enumerate
utilisez l'identifiant du serveur récupéré pour modifier la valeur de:
\end_layout

\begin_deeper
\begin_layout Enumerate
\begin_inset Quotes eld
\end_inset

COMPUTER_OLYMPIAD_GUILD_ID
\begin_inset Quotes erd
\end_inset

.
\end_layout

\end_deeper
\begin_layout Enumerate
verifiez que dans le fichier 
\begin_inset Quotes eld
\end_inset

parameters.conf
\begin_inset Quotes erd
\end_inset

,
 nous avons bien:
\end_layout

\begin_deeper
\begin_layout Enumerate
\begin_inset Quotes eld
\end_inset

BETA_TEST_MODE=False
\begin_inset Quotes erd
\end_inset

.
\end_layout

\end_deeper
\end_deeper
\begin_layout Enumerate
pour chaque bot arbitre (d'index 
\begin_inset Formula $i$
\end_inset

):
\end_layout

\begin_deeper
\begin_layout Enumerate
dans le serveur,
 créer un salon 
\begin_inset Quotes eld
\end_inset

match_
\shape slanted
i
\shape default

\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Enumerate
clic droit sur le salon:
 copier ID:
\end_layout

\begin_layout Enumerate
Dans le fichier 
\begin_inset Quotes eld
\end_inset

parameters.conf
\begin_inset Quotes erd
\end_inset

:
\end_layout

\begin_deeper
\begin_layout Enumerate
collez comme valeur de BETA_TEST_REFEREE_BOT_
\shape slanted
i
\shape default
_DISCORD_CHANNEL
\end_layout

\end_deeper
\end_deeper
\end_deeper
\begin_layout Enumerate
Désactivez le 
\begin_inset Quotes eld
\end_inset

mode développeur
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Remark
Si vous participez ensuite à la beta test des Computer Olympiad,
 n'oubliez pas de supprimer la ligne ajoutée et décommenter l'originale.
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Remark
Si vous participez ensuite aux Computer Olympiad,
 n'oubliez pas de mettre 
\begin_inset Quotes eld
\end_inset

BETA_TEST_MODE=False
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Subsection
Création du 
\begin_inset Quotes eld
\end_inset

compte de bot
\begin_inset Quotes erd
\end_inset

 arbitre
\begin_inset CommandInset label
LatexCommand label
name "subsec:Création-du-compte-arbitre"

\end_inset


\end_layout

\begin_layout Standard
Nous expliquons maintenant comment créer un 
\begin_inset Quotes eld
\end_inset

compte de bot
\begin_inset Quotes erd
\end_inset

 pour un bot arbitre.
 Notez que vous devez créer un compte de bot pour chaque bot arbitre.
\end_layout

\begin_layout Standard
La procédure à suivre est identique à celle de la Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Créer-le-compte-de-bot"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

 sauf pour l'étape 5 où il faut en plus activer l'option 
\begin_inset Quotes eld
\end_inset

Manage Messages
\begin_inset Quotes erd
\end_inset

 et que pour chaque bot arbitre,
 le token correspondant doit servir à spécifier REFEREE_BOT_
\shape italic
i
\shape default
_DISCORD_TOKEN dans le fichier parameter.conf.
\end_layout

\begin_layout Subsection
Invitation des joueurs sur le serveur
\begin_inset CommandInset label
LatexCommand label
name "subsec:Invitation-des-joueurs"

\end_inset


\end_layout

\begin_layout Standard
Nous expliquons maintenant comment inviter les joueurs et opérateurs de bot humain sur votre serveur:
\end_layout

\begin_layout Enumerate
Clic droit sur l'icone de votre serveur dans la barre verticale des serveurs à gauche.
\end_layout

\begin_layout Enumerate
Cliquez sur 
\begin_inset Quotes eld
\end_inset

Inviter des gens
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Enumerate
Cliquez sur le bouton 
\begin_inset Quotes eld
\end_inset

Copier
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Enumerate
Envoyez aux personnes à inviter,
 le lien ainsi copié.
\end_layout

\begin_layout Standard
Les personnes à inviter devront alors suivre le protocole de la Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Discord:-serveurs-et-salons"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

 en utilisant ce lien à la place du lien des Computer Olympiad.
\end_layout

\begin_layout Subsection
Invitation des bots sur le serveur
\begin_inset CommandInset label
LatexCommand label
name "subsec:Invitation-des-bots"

\end_inset


\end_layout

\begin_layout Standard
Nous expliquons maintenant comment inviter les bots joueurs et arbitre sur votre serveur.
 Nous supposons que vous avez suivi la Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Création-d'un-serveur"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

 et ainsi récupéré l'URL d'invitation du bot arbitre et que les participants vous ont également fourni leur URL d'invitation après avoir suivi la Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Création-du-compte"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

.
 Pour chaque URL:
\end_layout

\begin_layout Enumerate
Coller l'URL dans votre navigateur.
 
\end_layout

\begin_layout Enumerate
Connectez vous à votre compte discord (si requis).
 
\end_layout

\begin_layout Enumerate
Choisissez votre serveur parmi la liste des serveurs proposés.
\end_layout

\begin_layout Enumerate
Cliquez sur le bouton 
\begin_inset Quotes eld
\end_inset

Continuer
\begin_inset Quotes erd
\end_inset

.
 
\end_layout

\begin_layout Enumerate
Si c'est un bot d'une autre personne:
\end_layout

\begin_deeper
\begin_layout Enumerate
vérifiez que les autorisations demandées correspondent bien à celles spécifiées dans la section correspondante de création du compte de bot (joueur:
 Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Création-du-compte"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

 / arbitre:
 Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "subsec:Création-d'un-serveur"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

).
\end_layout

\end_deeper
\begin_layout Enumerate
Cliquez sur le bouton 
\begin_inset Quotes eld
\end_inset

Autoriser
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Subsection
Lancement du bot arbitre
\begin_inset CommandInset label
LatexCommand label
name "subsec:Lancement-du-bot"

\end_inset


\end_layout

\begin_layout Standard
Nous expliquons,
 dans cette section,
 comment lancer le bot arbitre.
 Pour ce faire,
 exécutez:
 
\end_layout

\begin_layout Standard
\align center
\begin_inset Quotes eld
\end_inset

python3 main_referee.py
\begin_inset Quotes erd
\end_inset


\end_layout

\begin_layout Standard
dans le terminal depuis la racine du dossier 
\begin_inset Quotes eld
\end_inset

discord_interface
\begin_inset Quotes erd
\end_inset

.
\end_layout

\begin_layout Standard
Les joueurs en mode manuel n'ont plus qu'à suivre la Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Jeu-manuel"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

 et les joueurs en mode automatique la Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Jeu-automatisé-par"
plural "false"
caps "false"
noprefix "false"
nolink "false"

\end_inset

.
\end_layout

\begin_layout Remark
Si le programme du bot arbitre venait à planter en plein match,
 relancer le,
 puis exécutez la commande 
\begin_inset Quotes eld
\end_inset

!continue
\begin_inset Quotes erd
\end_inset

 dans le salon du match.
\end_layout

\begin_layout Standard
\begin_inset Separator plain
\end_inset


\end_layout

\begin_layout Remark
Si l'un des bots joueurs venait à planter en plein match et que le relancer et utiliser 
\begin_inset Quotes eld
\end_inset

!continue
\begin_inset Quotes erd
\end_inset

 ne règle pas le problème,
 vous pouvez tenter de killer l'arbitre,
 le relancer et utiliser la commande 
\begin_inset Quotes eld
\end_inset

!continue
\begin_inset Quotes erd
\end_inset

 (si vous supposez que le problème provenait ou a été propagé au bot arbitre).
\end_layout

\end_body
\end_document
